# 智谱AI聊天与记录Agent

这是一个基于智谱AI API的聊天助手，具有文件读取和数据库记录功能。该助手可以与用户进行闲聊，同时能够记录用户的饮食和消费信息。

## 功能特点

1. 基于智谱AI的自然对话能力
2. 读取文件功能
3. 使用SQLite数据库记录用户数据
4. 记录所有函数调用历史

## 可用功能

1. **记录饮食信息**：记录用户在特定日期吃了什么、花了多少钱
2. **读取文件**：读取指定路径的文件内容
3. **查询记录**：获取所有已记录的饮食信息

## 数据库结构

系统使用SQLite数据库存储以下信息：

1. **饮食记录表(eating_records)**：
   - 日期(date)
   - 食物(food)
   - 金额(money)
   - 创建时间(created_at)

2. **函数调用日志表(function_calls)**：
   - 函数名称(function_name)
   - 函数参数(arguments)
   - 调用时间(called_at)

## 使用方法

1. 安装依赖：
   ```
   pip install -r requirements.txt
   ```

2. 运行应用：
   ```
   python app.py
   ```

3. 与助手对话示例：
   - 可以进行自然对话
   - 记录饮食信息：例如"今天我吃了牛肉面，花了35元"
   - 查询记录：例如"查看我的所有记录"
   - 读取文件：例如"帮我读取config.txt文件"

## 工作流程

1. 用户与助手进行闲聊
2. 当用户提供完整的日期、食物和金额信息时，助手会自动调用记录功能
3. 如果信息不完整，助手会引导用户提供缺失的信息
4. 所有函数调用都会被记录到数据库中

## 开发者说明

- API密钥配置在app.py文件中，请替换为您自己的密钥
- 数据库文件会自动创建在项目根目录 